<div class="app-container">
  
  <header class="main-header">
    <div class="logo-wrapper logo-left">
      <img src="logo-psicologa.png" alt="Psic贸loga" class="header-logo ps-logo">
    </div>
    <div class="header-title">
      <h1>Evaluaci贸n de Riesgos Psicosociales</h1>
      <h2>Cuestionario ISTAS-21 (Versi贸n Corta - An贸nimo)</h2>
    </div>
    <div class="logo-wrapper logo-right">
      <img src="logo-clinica.png" alt="Innomedic" class="header-logo in-logo">
    </div>
  </header>

  <main class="survey-content">
    
    <section class="card data-card" id="card-datos">
      <h3 class="card-title">
        <span class="icon"></span> Datos Generales
      </h3>
      
      <div class="form-grid">
        <div class="form-group span-2">
          <label for="empresa">Empresa / Organizaci贸n: <span class="required">*</span></label>
          <input id="empresa" [(ngModel)]="modelo.empresa" placeholder="Ej. Cl铆nica San Felipe">
        </div>
        
        <div class="form-group span-2">
          <label for="puesto">Puesto de Trabajo: <span class="required">*</span></label>
          <input id="puesto" [(ngModel)]="modelo.puesto" placeholder="Ej. Enfermero/a, Administrativo, T茅cnico...">
        </div>

        <div class="form-group">
          <label for="edad">Edad: <span class="required">*</span></label>
          <input id="edad" type="number" [(ngModel)]="modelo.edad" placeholder="Ej. 35">
        </div>
        <div class="form-group">
          <label for="sexo">Sexo: <span class="required">*</span></label>
          <select id="sexo" [(ngModel)]="modelo.sexo">
            <option value="Masculino">Masculino</option>
            <option value="Femenino">Femenino</option>
          </select>
        </div>
      </div>
      <p style="margin-top: 15px; font-size: 0.85rem; color: #666; font-style: italic;">
        * Esta encuesta es an贸nima. No se registran nombres ni correos electr贸nicos personales.
      </p>
    </section>

    <section class="questions-section">
      <div *ngFor="let preg of preguntas" class="card question-card" [id]="'preg-' + preg.id">
        <div class="question-header">
          <span class="question-number">{{preg.id}}</span>
          <p class="question-text">{{preg.texto}} <span class="required">*</span></p>
        </div>
        
        <div class="options-container">
          <label *ngFor="let opt of (preg.opcionesEspecificas || opcionesGenericas)" class="option-btn" 
                 [class.selected]="modelo['p'+preg.id] === opt.valor"
                 
                 [style.width]="preg.id === 31 ? '100%' : 'auto'" 
                 [style.text-align]="preg.id === 31 ? 'left' : 'center'"
                 [style.justify-content]="preg.id === 31 ? 'flex-start' : 'center'">
            
            <input type="radio" [name]="'p'+preg.id" [value]="opt.valor" 
                   (change)="modelo['p'+preg.id] = opt.valor">
            <span class="opt-text">{{opt.texto}}</span>
          </label>
        </div>
      </div>
    </section>

    <div class="footer-action">
      <button (click)="enviar()" [disabled]="enviando" class="submit-btn">
        <span *ngIf="!enviando">ENVIAR EVALUACIN ANNIMA</span>
        <span *ngIf="enviando" class="loading-state">
          <div class="spinner"></div> Procesando...
        </span>
      </button>
    </div>
  </main>

  <footer class="main-footer">
    <p>漏 2026 Servicios Profesionales de Psicolog铆a Ocupacional.</p>
  </footer>
</div>